# Linux

## 文件系统

![Linux的目录结构](https://raw.githubusercontent.com/chanshiyucx/poi/master/2019/Linux%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.png)

| 目录 | 说明                                                                     |
| ---- | ------------------------------------------------------------------------ |
| bin  | 存放二进制可执行文件                                                     |
| sbin | 存放二进制可执行文件，只有 root 才能访问                                 |
| boot | 存放用于系统引导时使用的各种文件                                         |
| dev  | 用于存放设备文件                                                         |
| etc  | 存放系统配置文件                                                         |
| root | 超级用户目录                                                             |
| home | 存放所有用户文件的根目录                                                 |
| lib  | 存放跟文件系统中的程序运行所需要的共享库及内核模块                       |
| mnt  | 系统管理员安装临时文件系统的安装点                                       |
| opt  | 额外安装的可选应用程序包所放置的位置                                     |
| proc | 虚拟文件系统，存放当前内存的映射                                         |
| tmp  | 用于存放各种临时文件                                                     |
| usr  | 用于存放系统应用程序，比较重要的目录 `/usr/local` 本地管理员软件安装目录 |
| var  | 用于存放运行时需要改变数据的文件                                         |

## 常见命令

### 命令基本格式

`[chan@localhost ~]$` 命令提示符：

- `chan` 表示当前登录用户，`root` 是超级管理员
- `localhost` 表示主机名
- `~` 表示当前目录（家目录），其中超级管理员家目录为 `/root`，普通用户家目录为 `/home/chan`
- `$` 表示普通用户提示符，`#` 表示超级管理员提示符

Linux 命令格式：`命令 [选项] [参数]`，需要注意：个别命令不遵守此规则，选项可以简化，如一些命令 `-a` 等同于 `--all`。

### 文件处理命令

| 命令  | 说明                               | 语法                                                       | 参数   | 参数说明                           |
| ----- | ---------------------------------- | ---------------------------------------------------------- | ------ | ---------------------------------- |
| ls    | 显示文件和目录列表                 | ls \[\-alrtAFR\] \[name\.\.\.\]                            |        |                                    |
|       |                                    |                                                            | \-l    | 列出文件的详细信息                 |
|       |                                    |                                                            | \-a    | 列出当前目录所有文件，包含隐藏文件 |
| mkdir | 创建目录                           | mkdir \[\-p\] dirName                                      |        |                                    |
|       |                                    |                                                            | \-p    | 父目录不存在情况下先生成父目录     |
| cd    | 切换目录                           | cd \[dirName\]                                             |        |                                    |
| touch | 生成一个空文件                     |                                                            |        |                                    |
| echo  | 生成一个带内容文件                 | echo abcd > 1\.txt，echo 1234 >> 1\.txt                    |        |                                    |
| cat   | 显示文本文件内容                   | cat \[\-AbeEnstTuv\] \[\-\-help\] \[\-\-version\] fileName |        |                                    |
| cp    | 复制文件或目录                     | cp \[options\] source dest                                 |        |                                    |
| rm    | 删除文件                           | rm \[options\] name\.\.\.                                  |        |                                    |
|       |                                    |                                                            | \-f    | 强制删除文件或目录                 |
|       |                                    |                                                            | \-r    | 同时删除该目录下的所有文件         |
| mv    | 移动文件或目录                     | mv \[options\] source dest                                 |        |                                    |
| find  | 在文件系统中查找指定的文件         |                                                            |        |                                    |
|       |                                    |                                                            | \-name | 文件名                             |
| grep  | 在指定的文本文件中查找指定的字符串 |                                                            |        |                                    |
| tree  | 用于以树状图列出目录的内容         |                                                            |        |                                    |
| pwd   | 显示当前工作目录                   |                                                            |        |                                    |
| ln    | 建立软链接                         |                                                            |        |                                    |
| more  | 分页显示文本文件内容               |                                                            |        |                                    |
| head  | 显示文件开头内容                   |                                                            |        |                                    |
| tail  | 显示文件结尾内容                   |                                                            |        |                                    |
|       |                                    |                                                            | \-f    | 跟踪输出                           |

查询目录内容 `ls`：

| 选项 | 描述                               |
| :--: | :--------------------------------- |
|  -a  | 显示包括隐藏文件的所有文件         |
|  -l  | 显示详细信息                       |
|  -h  | 人性化显示文件大小【配合 -l 食用】 |
|  -d  | 查看目录属性【需加参数】           |

`ls -l` 查看详细信息可以查看文件类型和访问权限，如 `-rw-r--r--`，其中首位代表文件类型，`- 文件，d 目录，| 软连接`。剩下九位三个一组，分别表示 `u 所有者，g 所属组，o 其他人` 的访问权限，权限各表示 `r 读，w 写，x 执行`。

- `mkdir`：建立目录，选项 `-p` 递归创建目录
- `rmdir`：删除空目录
- `rm -rf`：删除文件或目录，选项 `-r 删除目录，-f 强制删除`
- `cd`：切换目录，参数目录表示 `~ 家目录，- 上次目录，.. 上级目录`，在 Linux 下，按两下 `Tab` 可以进行目录补全
- `pwd`：查看当前所在目录
- `cp`：复制目录，`cp [选项] [源文件目录] [目标目录]`，选项 `-r 复制目录，-p 连带文件属性复制，-d 复制链接属性，-a 相当于 -pdr`
- `mv`：剪切目录，`mv [源文件目录或文件] [目标目录]`，该命令可以用来文件改名

### 文件搜索命令

- `locate`：在后台数据库搜索文件
- `updatedb`：更新后台数据库
- `whereis`：搜索系统命令所在位置
- `which`：搜索命令所在路径及别名
- `find`：搜索文件或文件夹

### 压缩和解压缩命令

Linux 常用压缩格式：`.zip、.gz、.bz2、.tar.gz、.tar.bz2`。

- `.zip`：`zip 压缩文件名 源文件` 压缩文件；`zip -r 压缩文件名 源目录` 压缩目录；`unzip 压缩文件` 解压缩
- `.gz`：`gzip 源文件` 压缩文件，源文件不保留；`gzip -c 源文件 > 压缩文件` 压缩文件，源文件保留；`gzip -r 目录` 压缩目录下所有子文件，但不能压缩目录；`gzip -d 压缩文件` 和 `gunzip 压缩文件` 都可以解压缩文件
- `.bz2`：`bzip2 源文件` 压缩文件，源文件不保留；`bzip2 -k 源文件` 压缩文件，源文件保留，注意 `bzip2` 命令不能压缩目录

打包命令 `tar` 可以将目录打包，然后用上述压缩命令进行压缩，解决目录不能压缩的问题。

- `tar -cvf 打包文件名 源文件` 打包命令，选项 `-c 打包，-v 显示过程，-f 指定打包后的文件名`
- `tar -xvf 打包文件吗` 解打包，选项 `-x 解打包`

`.tar.gz` 是先打包再压缩，使用 `tar -zcvf 压缩包.tar.gz 源文件` 一键打包压缩；`tar -zxvf 压缩包.tar.gz` 一键解压缩。同理 `-jcvf` 和 `-jxvf` 分别是压缩和解压缩 `.tar.bz2` 文件。添加 `-C` 选项可以选择解压缩位置。

### 关机与重启

`shutdown [选项] 时间`：选项 `-c 取消前一个关机命令，-h 关机，-r 重启`。

`shutdown -r 05:00 &` 表示凌晨五点重启，`&` 表示后台执行。`shutdown -r now` 立即重启。需要注意服务器一般不能远程关机，只能重启。

### 其他常见命令

1、停止、屏蔽、启动防火墙服务

```bash
systemctl stop firewalld
systemctl mask firewalld
systemctl start iptables
```
