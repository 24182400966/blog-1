控制反转（Inversion of Control，IoC），是面向对象编程中的一种设计原则，可以用来减低计算机代码之间的耦合度，其中最常见的方式叫做依赖注入（Dependency Injection，DI）。

## IoC 与 DI

控制反转与依赖注入都是结合使用的。通过控制反转，对象在被创建的时候，由一个调控系统内所有对象的外界实体，将其所依赖的对象的引用传递给它。也可以说，依赖被注入到对象中。

控制反转和依赖注入是 Spring 中最为重要的两个概念。在 Spring 中控制反转指创建对象由以前的程序员自己 new 构造方法来调用，变成了交由 Spring 创建对象。依赖注入简单地说就是拿到的对象的属性，已经被注入好相关值了，直接使用即可。

从技术角度上讲，Class A 中用到了 Class B 的对象 b，一般情况下，需要在 A 的代码中显式的 new 一个 B 的对象。采用依赖注入技术之后，A 的代码只需要定义一个私有的 B 对象，不需要直接 new 来获得这个对象，而是通过相关的容器控制程序来将 B 对象在外部 new 出来并注入到 A 类里的引用中。而具体获取的方法、对象被获取时的状态由配置文件（如 XML）来指定。

在 Java 中，依赖注入有如下实现方式：

- 基于接口：实现特定接口以供外部容器注入所依赖类型的对象。
- 基于 set 方法：实现特定属性的 public set 方法，来让外部容器调用传入所依赖类型的对象。
- 基于构造函数：实现特定参数的构造函数，在新建对象时传入所依赖类型的对象。
- 基于注解：基于 Java 的注解功能，在私有变量前加“@Autowired”等注解，不需要显式的定义以上三种代码，便可以让外部容器传入对应的对象。该方案相当于定义了 public 的 set 方法，但是因为没有真正的 set 方法，从而不会为了实现依赖注入导致暴露了不该暴露的接口（因为 set 方法只想让容器访问来注入而并不希望其他依赖此类的对象访问）。

##
